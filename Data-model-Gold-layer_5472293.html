<!DOCTYPE html>
<html>
    <head>
        <title>IT Documentation : Data model Gold layer</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">IT Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="IT-Documentation-Home-Page_4718593.html">IT Documentation Home Page</a></span>
                            </li>
                                                    <li>
                                <span><a href="Data-Platform_3735660.html">Data Platform</a></span>
                            </li>
                                                    <li>
                                <span><a href="Development-Standards-and-Guidelines_5603362.html">Development Standards and Guidelines</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            IT Documentation : Data model Gold layer
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Martjan Pols</span>, last modified by <span class='editor'> Corjan van Uffelen</span> on jun. 15, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <style type='text/css'>/*<![CDATA[*/
div.rbtoc1657623288528 {padding: 0px;}
div.rbtoc1657623288528 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1657623288528 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1657623288528'>
<ul class='toc-indentation'>
<li><a href='#DatamodelGoldlayer-Datamodelstandards'>Data model standards</a>
<ul class='toc-indentation'>
<li><a href='#DatamodelGoldlayer-Factsanddimensions'>Facts and dimensions</a></li>
<li><a href='#DatamodelGoldlayer-Dateanddatetime'>Date and date time</a>
<ul class='toc-indentation'>
<li><a href='#DatamodelGoldlayer-Thedateandtimeconcepts'>The date and time concepts</a></li>
<li><a href='#DatamodelGoldlayer-Validfromandto'>Valid from and to</a></li>
<li><a href='#DatamodelGoldlayer-Timezone'>Time zone</a></li>
</ul>
</li>
<li><a href='#DatamodelGoldlayer-Generalnamingconvention'>General naming convention</a></li>
</ul>
</li>
<li><a href='#DatamodelGoldlayer-Modellayer'>Model layer</a>
<ul class='toc-indentation'>
<li><a href='#DatamodelGoldlayer-Tableconventions'>Table conventions</a></li>
<li><a href='#DatamodelGoldlayer-Standardcolumns'>Standard columns</a></li>
<li><a href='#DatamodelGoldlayer-Columnconventions'>Column conventions</a></li>
</ul>
</li>
<li><a href='#DatamodelGoldlayer-Datawarehouselayer'>Data warehouse layer</a>
<ul class='toc-indentation'>
<li><a href='#DatamodelGoldlayer-Tableconventions.1'>Table conventions</a></li>
<li><a href='#DatamodelGoldlayer-Standardcolumns.1'>Standard columns</a></li>
<li><a href='#DatamodelGoldlayer-Standardcolumnspertabletype'>Standard columns per table type</a></li>
<li><a href='#DatamodelGoldlayer-Defaultdatahandling'>Default data handling</a>
<ul class='toc-indentation'>
<li><a href='#DatamodelGoldlayer-Defaultonattributelevel.'>Default on attribute level.</a></li>
<li><a href='#DatamodelGoldlayer-Defaultdataonrelations'>Default data on relations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#DatamodelGoldlayer-Othernamingtopics'>Other naming topics</a></li>
</ul>
</div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>DRAFT (Martjan) Ready for review</p></div></div><h1 id="DatamodelGoldlayer-Datamodelstandards">Data model standards</h1><p>The purpose of modelling standards is to come to a company standard for reporting and the way how they are modeled in a consistent way. The final goal is to harmonize the definitions within the company as much as possible. The only way to achieve this is to discuss the standards with the business, and manage any new requirement to either stick to the modelling standard, or enhance / adjust the standard for the entire model.</p><p> For example: if columns from multiple sources or business partners contains hours, name it consistently over the model using a suffix hours or hrs.</p><p>In the gold layer there are 3 layers with their own naming conventions and naming. The conventions are mandatory, or needs additional explanation in the code on deviation of the standards. Naming conventions for the dimensional model applies to all layers related to the dimensional model:</p><ol><li><p>Model (Delta model) <br/>The daily delta to be added to the data warehouse</p></li><li><p>Data warehouse <br/>The technical dimensional model created for keeping as much detail as possible storing all history.</p></li><li><p>PBI data model</p><p>This layer allows to simplify the data warehouse layer using different grains and name conversions</p></li></ol><p>All three layers are described in detail in this page.</p><h2 id="DatamodelGoldlayer-Factsanddimensions">Facts and dimensions</h2><p>A basic explanation of facts and dimensions can be found <a href="Dimensional-modelling_5701673.html" data-linked-resource-id="5701673" data-linked-resource-version="2" data-linked-resource-type="page">here</a>.</p><h2 id="DatamodelGoldlayer-Dateanddatetime">Date and date time</h2><p>The dates are of extreme importance in all layers of a data warehouse. Questions like when was the record created in my dimension, or when was the record created in the system or from which moment will this change take effect (changing address for example). All these questions require deep understanding of the different dates used.</p><h3 id="DatamodelGoldlayer-Thedateandtimeconcepts">The date and time concepts</h3><p>There are multiple date concepts:</p><ol><li><p><span class="inline-comment-marker" data-ref="5e17935f-cb3e-4dc8-ae86-c67d633a9d13">The moment the record is created in the system (mostly stored in the system as creation date)(technical valid from) or at the current snapshot implementation this is the dt date in the bronze layer</span></p></li><li><p>The moment the record is effective to (business wise or accounting wise). Such changes occur on contracts, or changing address or in the financial world where bookings can be made in the past or in the future. (booking date or effective valid from)</p></li><li><p>The moment the record enters the data warehouse. This is the moment where the tool connects to the source system and grab the record from there and store it in the warehouse. (dbt updated at)</p></li><li><p>The moment the record is loaded in the final reporting tool. In most cases there is a lag between loading the data in the warehouse and the final creation of the dimension. (dbt updated at)</p></li><li><p>The business date. The records are saved in the data warehouse at night copying the data from the day before. If the pipeline runs on 1-1-2022 at 0:05, the business date is set to 31-12-2021 (dwh_batch_date).</p></li></ol><p>If a fact needs to be connected to the date dimension:</p><ul><li><p>Choose the right date to connect with</p></li><li><p>Create multiple date columns in case multiple views are needed</p></li><li><p>Link by default to date only, and avoid reporting on time unless a specific requirement is given. So, all dates are date only, no date time unless a specific requirement is given.</p></li><li><p>In case reporting on time is needed, split the date time into two columns, one for the date, one for the time</p></li></ul><p>With two dimensions in the warehouse all requirements related to reporting on dates and time can be covered to link the facts. In the warehouse there is no need to create multiple date dimensions. The two dimensions are:</p><ol><li><p>The date dimension which contains all relevant attributes on dates level. (week, year, quarter, first day of week, etc.…)</p></li><li><p>The Time dimension which contains all relevant attributes at time level. (hour, minute, second, part of day, before noon, after noon, etc.…)</p></li></ol><h3 id="DatamodelGoldlayer-Validfromandto">Valid from and to</h3><p>In case the history needs to be captured of any of the concepts mentioned above, the valid from and to concept helps to identify which version was valid at a given moment in time. As there is no need to monitor in seconds the valid from and to will use seconds to close the timeline. Within IHC we use the daily snapshot, so the time is not needed.</p><p>Default implementation see date columns <a href="Data-model-Silver-layer_5636183.html" data-linked-resource-id="5636183" data-linked-resource-version="4" data-linked-resource-type="page">from silver layer</a> </p><h3 id="DatamodelGoldlayer-Timezone"><span class="inline-comment-marker" data-ref="093fe53f-0d87-434b-a0f1-bcf430924512">Time zone</span></h3><p><span class="inline-comment-marker" data-ref="093fe53f-0d87-434b-a0f1-bcf430924512">All data should be stored in CTE time. In case a source system exports in a different time zone, the silver layer should convert it to CTE time. </span></p><h2 id="DatamodelGoldlayer-Generalnamingconvention">General naming convention</h2><p>In general the objects in the data warehouse should be unique and therefore exist only once in the data eco system. Furthermore some general naming rules:</p><div class="table-wrap"><table data-layout="default" data-local-id="078a3a40-3f61-4ae3-a618-3adcba41f317" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Rule</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Explanation</strong></p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Meaningful</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Use of meaningful names over abbreviations</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Lowercase</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Use lowercase everywhere to avoid additional handling during typing</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Abbreviations in upper</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Sometimes abbreviations are needed. In that case the abbreviation is in upper</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Language</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>All in English</p></td></tr></tbody></table></div><h1 id="DatamodelGoldlayer-Modellayer">Model layer</h1><p>The model layer provides a snapshot of the object to process towards the data warehouse. This is the snapshot of the day before taken after midnight.</p><h2 id="DatamodelGoldlayer-Tableconventions">Table conventions</h2><p>The main tables in dimensional model are dimensions and facts. The convention is organized per dimension type</p><div class="table-wrap"><table data-layout="default" data-local-id="a8418472-158e-4f66-b426-14d4c0de170b" class="confluenceTable"><colgroup><col style="width: 206.0px;"/><col style="width: 207.0px;"/><col style="width: 207.0px;"/><col style="width: 140.0px;"/></colgroup><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>type</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>DWH</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>example</strong></p></td><td class="confluenceTd"><p><strong>convention</strong></p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Dimensions</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Prefixed with mdl_dim_</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>mdl_dim_company</p></td><td class="confluenceTd"><p>singular</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Fact</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Prefixed with mdl_fact_</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>mdl_fact_purchase_orders</p></td><td class="confluenceTd"><p>plural</p></td></tr></tbody></table></div><h2 id="DatamodelGoldlayer-Standardcolumns">Standard columns</h2><p>Standard columns are needed for processing the data in the right consistent way. Every layer needs different columns in order to process the right set of records. Therefore, standards are needed and a thorough understanding of what they mean. As the model layer is just a subset to be processed, very few meta data is stored in this layer.</p><div class="table-wrap"><table data-layout="default" data-local-id="48404f8a-fee3-40ec-b729-a9e74154a06d" class="confluenceTable"><colgroup><col style="width: 195.0px;"/><col style="width: 218.0px;"/><col style="width: 182.0px;"/><col style="width: 164.0px;"/></colgroup><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Column name</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Description</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Data type</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Mandatory</strong></p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>_id</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>a data warehouse created id, links to the unique value of the dimension irrespective of the type 2 history. Mostly a concatenation of source system and source system id</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Text field, as this is a concatenation of source system and id</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Yes, this in combination with the date makes the table unique</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>src_system_id</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>a three letter abbreviation to describe the source system, e.g. ifs</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Text field</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Yes</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>src_column_id</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>a source system created id which is the unique field from the source system. A unique identifier from the source system. Mostly a code or number</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Source system specific?</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Yes</p></td></tr></tbody></table></div><p> </p><h2 id="DatamodelGoldlayer-Columnconventions">Column conventions</h2><p>Other conventions not being the standard columns</p><div class="table-wrap"><table data-layout="default" data-local-id="450db019-0108-41d5-a7df-7cbef0b5e007" class="confluenceTable"><colgroup><col style="width: 170.0px;"/><col style="width: 170.0px;"/><col style="width: 170.0px;"/><col style="width: 170.0px;"/></colgroup><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Column</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Description</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Convention</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>examples</strong></p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Dates</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>All date fields</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffix _date</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>creation_date</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Codes*</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Code fields belonging to descriptions. understandable code.</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffix _code</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>company_code</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Description</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>All descriptions belonging to codes</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffix _desc</p><p>Could have variants like</p><p>_desc_short</p><p>_desc_long</p><p> </p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>company_desc</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Text</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Long fields with comments or feedback not related to codes</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffixed _text</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>feedback_text</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Names</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Mostly used for concrete things like person, project, ship, company</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffix _name</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>company_name</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Amounts</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Add suffixes in case a specific unit of measure is mend</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>suffix like _amt</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>booking_amt</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Hours</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Add suffixes in case a specific unit of measure is mend</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffix like _hours</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>worked_hours</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Unit of measures…</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Add suffixes in case a specific unit of measure is mend</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffixed</p><p>List of Values of IFS unit of measures</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p> </p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Percentages</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Add suffix</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Suffixed like _pct</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>complete_pct</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Boolean</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Write positive like is active instead of is inactive</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Prefixed is_</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>is_active</p></td></tr></tbody></table></div><p>*Additional comments on codes, IDs and sequences.</p><p>Within IHC there is a now and than a need to both keep ID from source system, codes, sequence etc. An example for this issue is information about activities, which have a sequence, and ID, and a code coming from different systems, in that case it’s the developers choice how to handle this. Please document if applicable.</p><h1 id="DatamodelGoldlayer-Datawarehouselayer">Data warehouse layer</h1><p>Any difference compared to previous layer will be documented here.</p><h2 id="DatamodelGoldlayer-Tableconventions.1">Table conventions</h2><p>The main tables in dimensional model are dimensions and facts. The convention is organized per dimension type</p><div class="table-wrap"><table data-layout="default" data-local-id="e4f8b83d-968f-4d40-ab0f-7a85b44ea471" class="confluenceTable"><colgroup><col style="width: 226.67px;"/><col style="width: 226.67px;"/><col style="width: 226.67px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><strong>type</strong></p></td><td class="confluenceTd"><p><strong>DWH</strong></p></td><td class="confluenceTd"><p><strong>example</strong></p></td></tr><tr><td class="confluenceTd"><p><strong>Dimensions</strong></p></td><td class="confluenceTd"><p>Prefixed with dwh_dim_<br/>Singular</p></td><td class="confluenceTd"><p>dwh_dim_company</p></td></tr><tr><td class="confluenceTd"><p><strong>Fact</strong></p></td><td class="confluenceTd"><p>Prefixed with dwh_fact_</p><p>Plural</p></td><td class="confluenceTd"><p>dwh_fact_activity_monitoring</p><p>dwh_fact_shop_orders</p></td></tr></tbody></table></div><p> </p><h2 id="DatamodelGoldlayer-Standardcolumns.1">Standard columns</h2><p>Standard columns are needed for processing the data in the right consistent way. Every layer needs different columns in order to process the right set of records. Therefore, standards are needed and a thorough understanding of what they mean.</p><div class="table-wrap"><table data-layout="default" data-local-id="75ee0836-049b-4bb7-ac34-8a5e301c15f1" class="confluenceTable"><colgroup><col style="width: 195.0px;"/><col style="width: 316.0px;"/><col style="width: 144.0px;"/><col style="width: 104.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Column name</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td><td class="confluenceTd"><p><strong>Data type</strong></p></td><td class="confluenceTd"><p><strong>Mandatory</strong></p></td></tr><tr><td class="confluenceTd"><p><strong>_id</strong></p></td><td class="confluenceTd"><p>a data warehouse created id, links to the unique value of the dimension irrespective of the type 2 history. Mostly a concatenation of source system and source system id</p></td><td class="confluenceTd"><p>Text field, as this is a concatenation of source system and id</p></td><td class="confluenceTd"><p>Yes, this in combination with the date makes the table unique</p></td></tr><tr><td class="confluenceTd"><p><strong>src_system_id</strong></p></td><td class="confluenceTd"><p>a three letter abbreviation to describe the source system, e.g. ifs</p></td><td class="confluenceTd"><p>String</p></td><td class="confluenceTd"><p>No</p></td></tr><tr><td class="confluenceTd"><p><strong>src_column_id</strong></p></td><td class="confluenceTd"><p>a source system created id which is the unique field from the source system. A unique identifier from the source system. Mostly a code or number</p></td><td class="confluenceTd"><p>Source system specific?</p></td><td class="confluenceTd"><p>Yes</p></td></tr><tr><td class="confluenceTd"><p><strong>dim_table_name_id</strong></p><p><strong> </strong></p></td><td class="confluenceTd"><p>a DWH created id (mostly a concatenation of source system and source id) linked to the dimension from the fact.<br/>Only used in the daily delta sub result for processing</p></td><td class="confluenceTd"><p>Text field due to concatenation of source system and</p></td><td class="confluenceTd"><p>Yes</p></td></tr><tr><td class="confluenceTd"><p><strong>dim_table_name_sk</strong></p></td><td class="confluenceTd"><p>A surrogate key. containing a unique meaningless number identifying one record in a dimension table. In a fact it is a relation to a dimension table taking the dimension value from the row version which belongs to that fact.</p></td><td class="confluenceTd"><p>Bigint</p></td><td class="confluenceTd"><p>Yes</p></td></tr><tr><td class="confluenceTd"><p><strong>dim_table_name_hsk</strong></p></td><td class="confluenceTd"><p>a hash key identifying the unique combination of the ID of the table and the valid from date.</p></td><td class="confluenceTd"><p>String</p></td><td class="confluenceTd"><p>Yes</p></td></tr><tr><td class="confluenceTd"><p><strong>dbt_valid_from</strong></p></td><td class="confluenceTd"><p>Date time field related to the moment the data enters the data environment (data lake, sql server) corrected for one day in case the load is after midnight</p></td><td class="confluenceTd"><p>Date</p></td><td class="confluenceTd"><p>Yes</p></td></tr><tr><td class="confluenceTd"><p><strong>dbt_valid_to</strong></p></td><td class="confluenceTd"><p>The date till which the record is valid. Either one second before the start of the newer record, or infinity in case it’s the last record</p></td><td class="confluenceTd"><p>Date</p></td><td class="confluenceTd"><p>Yes</p></td></tr><tr><td class="confluenceTd"><p><strong><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c">dbt scd id</span></strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c">The hashed value of the table except the dbt fields.</span></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c">String</span></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c">Yes</span></p></td></tr><tr><td class="confluenceTd"><p><strong><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c">Snapshot date</span></strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c"> A date identifying the snapshot of that particular (fact) table.</span></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c"> Date</span></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="be356afa-2967-49bf-82f0-be23524fa68c">No</span></p></td></tr><tr><td class="confluenceTd"><p><strong>dwh_batch_date</strong></p></td><td class="confluenceTd"><p>The business date: if the pipeline runs on 1-1-2022 at 0:05, the batch date will be 31-12-2021</p></td><td class="confluenceTd"><p>Date</p></td><td class="confluenceTd"><p>Yes</p></td></tr></tbody></table></div><p> </p><h2 id="DatamodelGoldlayer-Standardcolumnspertabletype">Standard columns per table type</h2><p>And the default columns per table type for the dwh layer:<br/>(For explanation of the types pls take a look <a href="Dimensional-modelling_5701673.html" data-linked-resource-id="5701673" data-linked-resource-version="2" data-linked-resource-type="page">here</a>)</p><div class="table-wrap"><table data-layout="default" data-local-id="19708528-5a32-4004-a6e1-629df249939e" class="confluenceTable"><colgroup><col style="width: 226.67px;"/><col style="width: 226.67px;"/><col style="width: 226.67px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Type</strong></p></td><td class="confluenceTd"><p><strong>Default columns</strong></p></td><td class="confluenceTd"><p><strong>Comment</strong></p></td></tr><tr><td class="confluenceTd"><p><strong>Dim type 0</strong></p></td><td class="confluenceTd"><p>Table_name_id</p><p>Table_name_sk</p></td><td class="confluenceTd"><p>Examples:</p><p>Dim_date, reference data, mapping tables</p><p>This table is build once and normally not reloaded / updated.</p></td></tr><tr><td class="confluenceTd"><p><strong>Dim type 1</strong></p></td><td class="confluenceTd"><p>dim_table_name_sk</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dim_table_name_hsk</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>table_name_id</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_from</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_to</p></td><td class="confluenceTd"><p>Always infinity, or last batch date in case it is deleted in the source system.</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="ec2a4be7-df4f-4470-b61d-ad1c3ba96bf7">dbt_updated_at</span></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="d7bb5e43-7156-4963-969d-243ebaf59eab">dbt_scd_id</span></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dwh_batch_date</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong>Dim type 2</strong></p></td><td class="confluenceTd"><p>dim_table_name_sk</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dim_table_name_hsk</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>table_name_id</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_from</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_to</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="fabe846a-2bfc-475f-a139-a512bf50164d">dbt_updated_at</span></p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="ae36ae56-3788-4016-8c4d-4aa81e53694f">dbt_scd_id</span></p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dwh_batch_date</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong>Fact mutation</strong></p></td><td class="confluenceTd"><p>dim_table_name_sk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dim_table_name_hsk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>table_name_id</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>Mutation_date using a business name like booking date</p></td><td class="confluenceTd"><p>Source system date of the mutation</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="fc69b9a9-f995-4a92-bb28-521ba2f2b24d">dbt_updated_at</span></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dwh_batch_date</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong>Fact snapshot</strong></p></td><td class="confluenceTd"><p>dim_table_name_sk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dim_table_name_hsk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>table_name_id</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>snapshot_date</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="ebd01da4-7356-48e9-a0dc-ffb8a999fe66">dbt_updated_at</span></p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dwh_batch_date</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong>Accumulated snapshot view</strong></p></td><td class="confluenceTd"><p>dim_table_name_sk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dim_table_name_hsk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>table_name_id</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>dbt_valid_from</p></td><td class="confluenceTd"><p>Showing only the start</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_to</p></td><td class="confluenceTd"><p>only relevant when source item is deleted. not used for history.</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="304817ee-118b-444e-84a8-04b5123d05c9">dbt updated at</span></p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dwh_batch_date</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong>Moving snapshot view</strong></p></td><td class="confluenceTd"><p>dim_table_name_sk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dim_table_name_hsk</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>table_name_id</p></td><td class="confluenceTd"><p>link to dimension</p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_from</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dbt_valid_to</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><span class="inline-comment-marker" data-ref="12a1c811-9b12-48db-81a6-75724d0d8ee3">dbt updated at</span></p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p>dwh_batch_date</p></td><td class="confluenceTd"><p> </p></td></tr></tbody></table></div><p> </p><h2 id="DatamodelGoldlayer-Defaultdatahandling">Default data handling</h2><p>Standardize data handling increases the readability in reporting. If one system deliver empty attributes using null and the other system uses '' both values will be visible in the reporting. Another default handling is needed on missing relations. What does a missing relation mean? is it a missing relation in the source system or a wrong selection of the dimension version? For example an activity lacks a project code which will result in a null value in the fact for that dimension. Both are handled in the data warehouse layer.</p><h3 id="DatamodelGoldlayer-Defaultonattributelevel.">Default on attribute level.</h3><p>Default values for attributes in dimensions and facts where applicable. Rules:</p><ul><li><p>Source system returns 1900-01-01 for date fields which are empty</p></li><li><p>Source system return ““ for empty text fields while the other system returns null value</p></li></ul><div class="table-wrap"><table data-layout="default" data-local-id="08541e8a-705c-41be-b746-3a357691400b" class="confluenceTable"><colgroup><col style="width: 97.0px;"/><col style="width: 191.0px;"/><col style="width: 222.0px;"/></colgroup><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Rule</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Standard</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Comment</strong></p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Date</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Meaningful date and otherwise NULL. </p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>(no 1900-01-01 or other nonsense date)</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p> Numeric / INT</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Keep both NULL and 0</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p /></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p>String</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Keep original value or apply the business rules</p><p>N/A default for not applicable<br/>Unknown default for dwh unknown</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>Business sometimes requires the original values. </p></td></tr></tbody></table></div><h3 id="DatamodelGoldlayer-Defaultdataonrelations">Default data on relations </h3><p>The fact table will contain null values in relation columns. Using default values the null values should not exist anymore. Two options are implemented.</p><ol><li><p>The lookup to the dimension didn’t find a record (Unknown).</p></li><li><p>There is no relation in the source system. (Not applicable)</p></li></ol><p>In both cases a default value is used which connect the fact to the dimensions default record.</p><p>Rules to apply on attributes for the default records:</p><div class="table-wrap"><table data-layout="default" data-local-id="2873ecb5-3b79-49c7-8e2c-89e69d6f913f" class="confluenceTable"><colgroup><col style="width: 170.0px;"/><col style="width: 170.0px;"/><col style="width: 170.0px;"/><col style="width: 170.0px;"/></colgroup><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Attribute type</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Unknown</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>not applicable</strong></p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p><strong>Comment</strong></p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p> ID fields</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-1 </p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-2</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>text or number depending on attribute type</p></td></tr><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><p>hsk field</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-1</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>-2</p></td><td data-highlight-colour="#ffffff" class="confluenceTd"><p>as text</p></td></tr><tr><td class="confluenceTd"><p>Date fields</p></td><td class="confluenceTd"><p>Null attribute</p></td><td class="confluenceTd"><p>Keep null</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p> int / decimal</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>otherwise it may influence the summation or counting</p></td></tr><tr><td class="confluenceTd"><p>string fields</p></td><td class="confluenceTd"><p>Unknown</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p> </p></td></tr></tbody></table></div><h1 id="DatamodelGoldlayer-Othernamingtopics">Other naming topics</h1><p>Some other non mandatory comments on naming topic which will enhance the modelling.</p><p>Default columns for recurring patterns</p><div class="table-wrap"><table data-layout="default" data-local-id="8f96fe62-44dd-4619-a177-9127e4e1f23f" class="confluenceTable"><colgroup><col style="width: 226.67px;"/><col style="width: 226.67px;"/><col style="width: 226.67px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Topic</strong></p></th><th class="confluenceTh"><p><strong>Rule</strong></p></th><th class="confluenceTh"><p><strong>example</strong></p></th></tr><tr><td class="confluenceTd"><p>Address</p></td><td class="confluenceTd"><p>Create same set of attributes for different objects use topic prefix to differentiate.</p></td><td class="confluenceTd"><p>address_number<br/>address_number_suffix<br/>address_zipcode<br/>address_city<br/>address_country_code<br/>address_country_desc</p><p>Ccstomer_address_</p></td></tr><tr><td class="confluenceTd"><p>Geographical data</p></td><td class="confluenceTd"><p>tbd</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Data versions</p></td><td class="confluenceTd"><p>Try to use one company clear definition on data versions like plan, baseline, forecast. Use this either as suffix or as a separate columns to differentiate</p></td><td class="confluenceTd"><p>actual<br/>plan<br/>baseline<br/>forecast<br/></p></td></tr><tr><td class="confluenceTd"><p>Reference data</p></td><td class="confluenceTd"><p>Define owner, create loop back to owner for maintenance of reference data (mapping tables)</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><p> </p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on jul. 12, 2022 12:54</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
