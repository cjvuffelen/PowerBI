<!DOCTYPE html>
<html>
    <head>
        <title>IT Documentation : Deployment troubleshooting</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">IT Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="IT-Documentation-Home-Page_4718593.html">IT Documentation Home Page</a></span>
                            </li>
                                                    <li>
                                <span><a href="Data-Platform_3735660.html">Data Platform</a></span>
                            </li>
                                                    <li>
                                <span><a href="Deployments_13336596.html">Deployments</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            IT Documentation : Deployment troubleshooting
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Alex Hoogvliet</span>, last modified on jul. 12, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong>Known issues/troubleshooting:</strong></p><p><strong><u>Load mode delta</u></strong></p><p>When load mode= delta it can happen that there is no data on a specific day, especially in TEST environment. In that case this test can fail:<br/>FAIL 1 dbt_expectations_source_expect_table_row_count_to_be_between_ifs_ext_ifs_project_trans_posting_tab_1__dt_var_dt_<br/>Also the case for ext_ifs_project_transaction_tab. So if there is a fail for main.test_source_ifs_ext_ifs_project_transaction_tab it can be accepted in Test.<br/>In TEST it is ok to ignore this. in PROD you really have to check if there is no data.</p><p><br/><strong><u>Load mode delta - errors</u></strong><br/>These 5 (6) tables have delta load. So if there are errors after a load bear in mind that it is a delta load.<br/>CDW_C_QUALITY_LOG has changed to full load.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/15237180/22249473.png" data-image-src="attachments/15237180/22249473.png" data-height="63" data-width="285" data-unresolved-comment-count="0" data-linked-resource-id="22249473" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220628-091252.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="f856cdf0-556b-4203-8623-a8631d21dc02" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image image-left" loading="lazy" src="attachments/15237180/22118403.png" data-image-src="attachments/15237180/22118403.png" data-height="122" data-width="351" data-unresolved-comment-count="0" data-linked-resource-id="22118403" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220628-091314.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="6c34e188-097c-464f-8d3c-91b566120c74" data-media-type="file"></span><p /><p /><p><strong><u>To go back to a previous version of a table</u></strong><br/>Case: PR#1879</p><p>In a datawarehouse table a column had to be renamed before the PROD run. This was forgotten, so during the prod run a new column was created and the run failed.<br/>risk_rowstate had to be renamed to risk_analysis_status. During the run the column had been created as it was existing in the model. So renaming was not possible anymore.<br/>Go back to earlier version of datawarehouse table:<br/>DESCRIBE HISTORY &lt;TABLE_NAME&gt;<br/>RESTORE &lt;TABLE_NAME&gt; VERSION AS OF &lt;VERSION_NUMBER&gt;<br/>Example:<br/>DESCRIBE HISTORY  datawarehouse.dwh_dim_risk_analysis<br/>RESTORE datawarehouse.dwh_dim_risk_analysis VERSION AS OF 39</p><p /><p><strong><u>New field (column) added to a dwh dimension file</u></strong><br/>When a new column is added to the datawarehouse dimension sql this will result in closing the records with -1 and -2 and adding new records resulting in double records and generating an error (not applicable for fact files).<br/>To resolve and avoid this:<br/>Before the run, perform the following sql. This will delete the records with -1 and -2 so that there will be no errors due to double records with -1 and -2.<br/>DELETE FROM datawarehouse.dwh_dim_&lt;NAME&gt; WHERE dim_&lt;FIELD&gt;_sk IN (-1,-2);<br/>Example in PR #371: <br/>            DELETE FROM datawarehouse.dwh_dim_sub_project WHERE dim_sub_project_sk IN (-1,-2);<br/>After the run, perform the following sql. This will sent the dbt_valid_from to the right value.<br/>UPDATE datawarehouse.dwh_dim_&lt;NAME&gt; SET dbt_valid_from = '1970-12-31' WHERE dim_&lt;FIELD&gt;_sk IN (-1,-2);<br/>Example in PR #371: <br/>           UPDATE datawarehouse.dwh_dim_sub_project SET dbt_valid_from = '1970-12-31' WHERE dim_sub_project_sk IN (-1,-2);</p><p /><p><strong><u>The following tables remain empty after a test load</u></strong><br/>- test.dwh_model.lkp_task_activity_code<br/>- test.dwh_model.lkp_prv_to_ifs_interface<br/>- test.dwh_model.lkp_prv_activity_calendar_scope<br/>- test.dwh_model.lkp_prv_resource_calendar_scope<br/></p><p><strong><u>Resolve conflicts in merge master locally</u></strong></p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="204" loading="lazy" src="attachments/15237180/16678963.png?width=204" data-image-src="attachments/15237180/16678963.png" data-height="224" data-width="1052" data-unresolved-comment-count="0" data-linked-resource-id="16678963" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220610-093453.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="0d11e578-908b-4c56-beb5-3f2fb1712832" data-media-type="file"></span><p>Local dbt<br/>git checkout master<br/>git pull<br/>git checkout &lt;bracnch with conflict&gt;<br/>git merge master<br/>adapt files - access change or incoming change or both<br/>git status (in order to be able to copy paste the name)<br/>git add &lt;file name including folder&gt;<br/>git commit -m “DATA-1234 some text”<br/>     In this case the file is already adapted in a previous PR and merged to the master.<br/>     So you should accept the incoming change in this case. (afterwards it appeared to have been the wrong choice, so choose carefully).<br/>git push<br/></p><span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image image-left" loading="lazy" src="attachments/15237180/16646220.png" data-image-src="attachments/15237180/16646220.png" data-height="276" data-width="842" data-unresolved-comment-count="0" data-linked-resource-id="16646220" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220610-094102.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="3b2bd36d-f0f5-4f19-b82d-73eef4da4fe1" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="340" loading="lazy" src="attachments/15237180/16646226.png?width=340" data-image-src="attachments/15237180/16646226.png" data-height="241" data-width="1006" data-unresolved-comment-count="0" data-linked-resource-id="16646226" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220610-094858.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="19558905-9df3-42df-9830-e6c7529578f0" data-media-type="file"></span><p><br/></p><p /><p><strong><u>Error in creating table</u></strong><br/><code>1 of 1 ERROR creating table model model.mdl_fact_piping_monitoring.............. [ERROR in 9.05s]</code><br/>('HY000', &quot;[HY000] [Simba][Hardy] (35) Error from server: error code: '0' error message: 'org.apache.hive.service.cli.HiveSQLException: Error running query: org.apache.spark.SparkException: Job aborted.\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation.org$apache$spark$sql$hive$thriftserver$SparkExecuteStatementOperatio'. (35) (SQLExecDirectW)&quot;)<br/>This can happen sometimes, in the model layer. Only the model layer there is a drop and create table. <br/>The table mdl_fact_piping_monitoring is already dropped, however the data is still there.<br/>To be seen via Databricks - Data - DBFS - mnt - curated - model <br/></p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/15237180/19955719.png" data-image-src="attachments/15237180/19955719.png" data-height="73" data-width="299" data-unresolved-comment-count="0" data-linked-resource-id="19955719" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220617-092712.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="07a2367c-e062-449b-abd8-33474324f2d3" data-media-type="file"></span><p>To be resolved by deleting the data via a Notebook.<br/>%scala<br/>//delete table from disk<br/>dbutils.fs.rm(&quot;/mnt/curated/datawarehouse/model/mdl_fact_piping_monitoring&quot;,recurse=true)</p><p /><p><strong><u>Error in merging data into dwh table</u></strong></p><p><code>Cannot perform Merge as multiple source rows matched and attempted to modify the same\ntarget row in the Delta table in possibly conflicting ways.</code></p><p>Indicates error with hash surrogate key, because probably new fields are added and a re-run has been done on the same day. In TEST and ACC it is ok to drop the DWH-table with the problem. Don’t do this in PROD.</p><p>Other issue could be that the HSK is not unique. We had a case in which someone changed the yml file for a model layer to include more fields in the unique key, but these extra fields were not included in the generation of the unique key in the DWH layer (the function with MD5).</p><p>Example:</p><span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image image-left" loading="lazy" src="attachments/15237180/20512803.png" data-image-src="attachments/15237180/20512803.png" data-height="182" data-width="728" data-unresolved-comment-count="0" data-linked-resource-id="20512803" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220620-140407.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="b984bfd3-f454-4f01-b6cf-adc4368d6aa7" data-media-type="file"></span><p /><p>Wrong code in DWH model:</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="340" loading="lazy" src="attachments/15237180/20512809.png?width=340" data-image-src="attachments/15237180/20512809.png" data-height="211" data-width="1063" data-unresolved-comment-count="0" data-linked-resource-id="20512809" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220620-140507.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="05addc95-cb19-4dcd-88b6-cbc6bb17f164" data-media-type="file"></span><p>This should be:</p><p /><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="340" loading="lazy" src="attachments/15237180/21266439.png?width=340" data-image-src="attachments/15237180/21266439.png" data-height="157" data-width="1175" data-unresolved-comment-count="0" data-linked-resource-id="21266439" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220622-143059.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="b4204f5b-ec5c-4a7c-8f51-85cd8f49beb8" data-media-type="file"></span><p /><p><strong><u>Error from server: error code: '0' when creating Staged table</u></strong></p><p>Runtime Error in snapshot stg_ifs_c_quality_log (snapshots/2_staged/ifs/stg_ifs_c_quality_log.sql)<br/>[2022-06-22, 09:03:47 CEST] {<a class="external-link" href="http://subprocess.py:92" rel="nofollow">subprocess.py:92</a>} INFO - 07:03:47    ('HY000', &quot;[HY000] [Simba][Hardy] (35) Error from server: error code: '0' error message: 'org.apache.hive.service.cli.HiveSQLException: Error running query: org.apache.spark.SparkException: Job 13093 cancelled because killed via the Web UI\n\tat org.apache.spark.sql.hive.thriftserver<br/>Cause: unique key is based on concatenation and one or more fields are NULL. So key is not unique anymore<br/>Solution: Delete table and adjust code for unique key with coalesce:<br/>See PR #403</p><p /><p><strong><u>To rerun all that had an error, also downstream</u></strong><br/>1. Via the Graph - search for ‘Failed’ - click clear and then everything runs downstream.<br/>2. Via Details - select both ‘upstream_failed’ and ‘failed’ - clear both and then everything will run also downstream.<br/>!!!CHECK HOE DIT WERKT - HET LUKTE MIJ NIET OM ALLE UPSTREAM FAILED TE HERSTARTEN<br/></p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="204" loading="lazy" src="attachments/15237180/21168133.png?width=204" data-image-src="attachments/15237180/21168133.png" data-height="253" data-width="1099" data-unresolved-comment-count="0" data-linked-resource-id="21168133" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220624-100448.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="317d5270-67bf-4a1e-9349-e2b6f0aa6593" data-media-type="file"></span><p /><p><strong><u>Error This request is not authorized……</u></strong></p><p>Example: 'HY000', '[HY000] [Simba][Hardy] (35) Error from server: error code: '0' error message: 'org.apache.hive.service.cli.HiveSQLException: Error running query: Operation failed: &quot;This request is not authorized to perform this operation using this permission.&quot;, 403, PUT, <a class="external-link" href="https://ihcdatalake01test.dfs.core.windows.net/curated/datawarehouse/dataware%5C'." rel="nofollow">https://ihcdatalake01test.dfs.core.windows.net/curated/datawarehouse/dataware\'.</a> (35) (SQLExecDirectW)')<br/>Example: [33mRuntime Error in model dwh_fact_sub_project_transactions (models/5_datawarehouse/dwh_fact_sub_project_transactions.sql)[0m<br/>[2022-06-30, 13:51:33 CEST] {<a class="external-link" href="http://subprocess.py:92" rel="nofollow">subprocess.py:92</a>} INFO - 11:51:33    ('HY000', '[HY000] [Simba][Hardy] (35) Error from server: error code: '0' error message: 'org.apache.hive.service.cli.HiveSQLException: Error running query: Operation failed: &quot;This request is not authorized to perform this operation using this permission.&quot;, 403, PUT, <a class="external-link" href="https://ihcdatalake01test.dfs.core.windows.net/curated/datawarehouse/dataware%5C'." rel="nofollow">https://ihcdatalake01test.dfs.core.windows.net/curated/datawarehouse/dataware\'.</a> (35) (SQLExecDirectW)')</p><p>Unmounting and remounting of the folders may be needed in order to resolve the authorization problem.<br/>Refer to description at <u>Renew Credentials</u>. The refresh of the credentials is not needed to resolve an error, that is only needed once every 2 years when the password has expired.<br/></p><p><strong><u>Renew Credentials</u></strong></p><p>There are 3 folders, visible in Azure Storage Explorer: raw, staged, curated.</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="102" loading="lazy" src="attachments/15237180/23003151.png?width=102" data-image-src="attachments/15237180/23003151.png" data-height="231" data-width="348" data-unresolved-comment-count="0" data-linked-resource-id="23003151" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-123808.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="8957e83b-9d1d-477d-a09c-aff8094a2a08" data-media-type="file"></span><p>For each folder ADLS gets a separate username and password.<br/>The username can be found via the Azure Portal via App Registrations:<br/>Example link to Acceptance Curated<br/><a class="external-link" href="https://portal.azure.com/#view/Microsoft_AAD_IAM/EnterpriseApplicationListBladeV2/query/Ihcdatalake01acc-CURATED-DBT-IFS-Write-A-WE" rel="nofollow">https://portal.azure.com/#view/Microsoft_AAD_IAM/EnterpriseApplicationListBladeV2/query/Ihcdatalake01acc-CURATED-DBT-IFS-Write-A-WE</a></p><p>Example: for ACC and CURATED folder the client id (application id) is as indicated below:<br/></p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="340" loading="lazy" src="attachments/15237180/22773797.png?width=340" data-image-src="attachments/15237180/22773797.png" data-height="211" data-width="1626" data-unresolved-comment-count="0" data-linked-resource-id="22773797" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-124815.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="c8f1bf85-35cc-4f0e-bb6d-44eb2920f9a3" data-media-type="file"></span><p>The password is a secret.<br/>Secrets are being stored in the keyvault, and get a name, for example: raw-ifs.<br/>The name of the keyvault is DBT-A-WE with the scope IHC-DataBricks-Technical-A-WE.<br/>In Azure the username and the password are linked.<br/>In Databricks the password can be retrieved via the following code:<br/>dbutils.secrets.get(scopeDB,passwordKey)<br/>The folders can now be mounted. This means remembering the username and password for a specific folder.<br/>This password has a maximum duration of 2 years and then it expires. The end date is not the same for all folders.<br/><br/>To renew credentials and unmount and remount for the Acceptance environment the following should be done. <br/>Same actions for Test and Prod of course.<br/>* Refresh password <br/><em>* </em>Link password to the username<br/>“Please refresh raw-ifs in DBT-A keyvault.”<br/>”Please refresh for Ihcdatalake01acc-RAW-DBT-IFS-Write-A-WE”<br/>”Please refresh for Ihcdatalake01acc-STAGED-DBT-IFS-Write-A-WE”<br/>”Please refresh for Ihcdatalake01acc-CURATED-DBT-IFS-Write-A-WE”<br/>* Unmount and remount all applicable folders.<br/>This is needed for the following zone\folders:<br/>    Raw\config<br/>    Raw\ifs<br/>    Raw\mars<br/>    Raw\extended<br/>    Raw\primavera<br/>    Raw\pbi<br/>    Raw\workday<br/>    Staged\ifs<br/>    Staged\datawarehouse<br/>    Curated\datawarehouse</p><p>Go to Notebook Mounting ADLS in Workspace - Shared - Configuration.<br/>Run the following commands (cells). The numbers are applicable for ACC environment, they might be different for TEST and PROD.<br/>Cmd 2  </p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="170" loading="lazy" src="attachments/15237180/22904931.png?width=170" data-image-src="attachments/15237180/22904931.png" data-height="491" data-width="675" data-unresolved-comment-count="0" data-linked-resource-id="22904931" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-144234.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="f3fd3686-0b45-4914-b626-3d803c8d98f0" data-media-type="file"></span><p>Here the following should be adapted before running: <br/>container, clientId, passwordKey. <br/>Note - the password used for Staged\datawarehouse (probably this one) is not staged-ifs but raw-ifs. Corjan noticed this during our mounting session.<br/>FYI the clientId is different for each container (raw, staged, curated) and for each environment (test,acc,prod). <br/>To complete this information below the clientIds are listed. They are also available in the mentioned Notebook.<br/>Ihcdatalake01test-RAW-DBT-IFS-Write-T-WE            3fb27f15-eabb-482a-98e4-9cf4d693bc94<br/>Ihcdatalake01test-STAGED-DBT-IFS-Write-T-WE       7c3c328e-6ce4-4dd3-8fec-eb62d3823e1a<br/>Ihcdatalake01test-CURATED-DBT-IFS-Write-T-WE    716c74c6-c90a-4ae8-b9d9-a64894cc4cd2 <br/>Ihcdatalake01acc-RAW-DBT-IFS-Write-A-WE             904ed6db-2bdf-431f-aa02-e6e1bbba8681<br/>Ihcdatalake01acc-STAGED-DBT-IFS-Write-A-WE        f8254ce6-3708-49d9-891e-7506830e055a<br/>Ihcdatalake01acc-CURATED-DBT-IFS-Write-A-WE      195e8139-fa15-409f-bb7b-82b59bba4e32<br/>Ihcdatalake01prod-RAW-DBT-IFS-Write-P-WE            9f0bdb64-41e8-40d6-b22e-5adcc67fb5db<br/>Ihcdatalake01prod-STAGED-DBT-IFS-Write-P-WE       0eadec25-6b3b-45b3-9ef4-de9e7ab4826f<br/>Ihcdatalake01prod-CURATED-DBT-IFS-Write-P-WE    ??????? NOT YET VISIBLE</p><p>Cmd 4 </p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="170" loading="lazy" src="attachments/15237180/22806569.png?width=170" data-image-src="attachments/15237180/22806569.png" data-height="288" data-width="639" data-unresolved-comment-count="0" data-linked-resource-id="22806569" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-145645.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="f5c248f4-5725-46b2-a40d-c0158640d6ce" data-media-type="file"></span><p>Cmd 5 </p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="217" loading="lazy" src="attachments/15237180/22839347.png?width=217" data-image-src="attachments/15237180/22839347.png" data-height="389" data-width="1097" data-unresolved-comment-count="0" data-linked-resource-id="22839347" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-145721.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="0bb37e98-d304-4ec8-81a9-e3dcf8a1deeb" data-media-type="file"></span><p>Cmd 7 (unmount) - fill in the right value.<br/>In below example the datawarehouse is unmounted and mounted.</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="170" loading="lazy" src="attachments/15237180/22970471.png?width=170" data-image-src="attachments/15237180/22970471.png" data-height="209" data-width="685" data-unresolved-comment-count="0" data-linked-resource-id="22970471" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-145851.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="b9bebb37-87f4-4b4d-80c4-13e69ee85dcd" data-media-type="file"></span><p>Cmd 8 (mount) - fill the right value.</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="170" loading="lazy" src="attachments/15237180/22741045.png?width=170" data-image-src="attachments/15237180/22741045.png" data-height="163" data-width="696" data-unresolved-comment-count="0" data-linked-resource-id="22741045" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-145953.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="b6fb65fc-c3fd-44a7-9fc3-26024243fa80" data-media-type="file"></span><p /><p>After the unmount and remount the script of Andi needs to run for the same folders.<br/>Go to GitHub IaC - Actions - New/Repair Folder in ADLS ACC - click on Run workflow.</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="102" loading="lazy" src="attachments/15237180/22839329.png?width=102" data-image-src="attachments/15237180/22839329.png" data-height="134" data-width="462" data-unresolved-comment-count="0" data-linked-resource-id="22839329" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-143308.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="d3ed65b4-2753-4aa1-a44b-d5b103f5bc62" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-left-wrap-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-wrap-left" width="102" loading="lazy" src="attachments/15237180/22904919.png?width=102" data-image-src="attachments/15237180/22904919.png" data-height="193" data-width="453" data-unresolved-comment-count="0" data-linked-resource-id="22904919" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-143345.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="1187c142-f210-43f0-a85f-17bb611c5765" data-media-type="file"></span><p /><p /><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="217" loading="lazy" src="attachments/15237180/22970463.png?width=217" data-image-src="attachments/15237180/22970463.png" data-height="88" data-width="1139" data-unresolved-comment-count="0" data-linked-resource-id="22970463" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-143517.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="31d7f1b3-e5da-439b-b9f0-5050ca3f2900" data-media-type="file"></span><p>Fill in the correct values. This should be done for each folder in each zone (refer to the list above).</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="108" loading="lazy" src="attachments/15237180/22839337.png?width=108" data-image-src="attachments/15237180/22839337.png" data-height="382" data-width="372" data-unresolved-comment-count="0" data-linked-resource-id="22839337" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220701-143706.png" data-base-url="https://ihcconfluence.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="15237180" data-linked-resource-container-version="29" data-media-id="fad33db3-731c-409e-a721-6186aa6d7b03" data-media-type="file"></span><p><strong>Runtime Error in snapshot</strong></p><p>14:20:24  Runtime Error in snapshot dwh_fact_shop_orders (snapshots\5_datawarehouse\dwh_fact_shop_orders.sql)<br/>14:20:24    &lt;class 'pyodbc.Error'&gt; returned a result with an error set</p><p>One of the things that could be wrong: one of the fields has been renamed, but the person forgot to also edit the field name in the surrogate key part. So check the fields in this piece of code:</p><p><code> {{ dbt_utils.surrogate_key(['f.activity_id','f.job_id','f.pbs_element_id','f.shop_order_id','operation_no','src_transaction_id']) }}</code></p><p /><p />
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/16678963.png">image-20220610-093453.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/16646220.png">image-20220610-094102.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/16646226.png">image-20220610-094858.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/19955719.png">image-20220617-092712.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/19628101.png">image-20220617-142036.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/20512803.png">image-20220620-140407.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/20512809.png">image-20220620-140507.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/21266439.png">image-20220622-143059.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/21168133.png">image-20220624-100448.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22249473.png">image-20220628-091252.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22118403.png">image-20220628-091314.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/23003151.png">image-20220701-123808.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22773797.png">image-20220701-124815.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22904913.png">image-20220701-143140.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22839329.png">image-20220701-143308.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22904919.png">image-20220701-143345.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22970463.png">image-20220701-143517.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22839337.png">image-20220701-143706.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22904931.png">image-20220701-144234.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22806569.png">image-20220701-145645.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22839347.png">image-20220701-145721.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22970471.png">image-20220701-145851.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15237180/22741045.png">image-20220701-145953.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on jul. 12, 2022 12:55</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
